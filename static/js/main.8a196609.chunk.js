(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{173:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(31),s=a.n(c),l=(a(90),a(36)),i=a(6),o=(a(91),a(92),a(93),a(94),a(77)),m=a.n(o),d=function(e){return r.a.createElement("div",{className:"heading my-4 d-flex justify-content-center align-items-center"},r.a.createElement("a",{href:"/",className:"logo"},r.a.createElement("img",{src:m.a,alt:"Site Logo",className:"rounded-circle"})),r.a.createElement("div",{className:"name-plate"},r.a.createElement("h1",{className:"display-4 m-0"},"Police Department of ",r.a.createElement("strong",null,"Berlin")),r.a.createElement("h4",{className:"m-0 h3"},"Stolen Bikes")))},u=a(17),g=a.n(u),h=a(28),p=a(78),f=a(79),E=a(84),N=a(83),v=a(21),b=a.n(v),x=a(34),y=a.n(x),w=function(e){var t=e.loading,a=e.showPrevLink,n=e.showNextLink,c=e.currentPageNumber,s=e.handlePrevClick,l=e.handleNextClick;return r.a.createElement("div",{className:"nav-link-container d-flex justify-content-center align-items-center"},r.a.createElement("a",{href:"#",className:"nav-link btn btn-primary ".concat(a?"show":"hide"," \n        ").concat(t?"greyed-out":""),onClick:s},"Prev"),r.a.createElement("a",{href:"#",className:"nav-link btn btn-primary"},c),r.a.createElement("a",{href:"#",className:"nav-link btn btn-primary ".concat(n?"show":"hide"," \n        ").concat(t?"greyed-out":""),onClick:l},"Next"))},S=a(35),k=a.n(S),D=function(e){var t=e.incidents;if(t)return r.a.createElement("ul",{className:"incidents-list"},t.map((function(e){return r.a.createElement("li",{key:e.id,className:"row mx-0 my-3 py-3 rounded animate__animated animate__fadeInUp"},r.a.createElement("img",{src:e.media.image_url||e.media.image_url_thumb||k.a,alt:"Not Found",className:"stolen-item-image mx-auto mx-md-0 col-7 col-md-2"}),r.a.createElement("div",{className:"details mt-3 mt-md-0 col-12 col-md-6"},r.a.createElement(l.b,{to:"/bike/".concat(e.id)},r.a.createElement("h5",{className:"text-primary m-0"},e.title.slice(7))),r.a.createElement("p",null,r.a.createElement("strong",null,"Description: ")," ",e.description||"Not Available")),r.a.createElement("div",{className:"date-details col-12 col-md-4"},r.a.createElement("span",null,r.a.createElement("strong",{className:"text-danger"},"Stolen on ")," ",new Date(1e3*e.occurred_at).toUTCString().slice(0,16),r.a.createElement("strong",{className:"text-danger"}," at "),new Date(1e3*e.occurred_at).toLocaleTimeString().replace(/:.* /,"").toLowerCase()),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",null,"Location "),e.address),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("strong",{className:"text-success"},"Reported on ")," ",new Date(1e3*e.updated_at).toUTCString().slice(0,16),r.a.createElement("strong",{className:"text-success"}," at "),new Date(1e3*e.updated_at).toLocaleTimeString().replace(/:.* /,"").toLowerCase())))})))},C=a(55),_=a.n(C),P=function(e){var t=e.handleSearchClick,a=e.handleSearchInput,n=e.handleStartDateChange,c=e.handleEndDateChange,s=e.startDate,l=e.endDate;return r.a.createElement("form",{onSubmit:t,className:"search-form m-5 d-flex justify-content-between align-items-start flex-wrap"},r.a.createElement("label",{htmlFor:"search-input",className:"search-label"},r.a.createElement("input",{type:"text",name:"search-input",id:"search-input",placeholder:"title...",onChange:a})),r.a.createElement("label",{htmlFor:"start-date",className:"date-picker"},r.a.createElement(_.a,{placeholderText:"start : mm/dd/yy",selected:s,onChange:n})),r.a.createElement("label",{htmlFor:"end-date",className:"date-picker"},r.a.createElement(_.a,{placeholderText:"end : mm/dd/yy",selected:l,onChange:c})),r.a.createElement("input",{type:"submit",value:"Search",className:"btn btn-primary border-0"}))},O=a(8),j=a.n(O),L=a(24),T=a.n(L),I=function(e){Object(E.a)(a,e);var t=Object(N.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={incidents:[],loading:!0,message:"",totalResults:0,totalPages:0,currentPageNumber:1,searchInput:"",startDate:0,endDate:0},e.componentDidMount=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get(T.a.incidents+"?proximity=Berlin&proximity_square=100&per_page=100").then((function(e){return e.data})).then((function(t){var a=t.incidents.length,n=j.a.getPageCount(a,10);e.setState({totalResults:a,totalPages:n})})).catch((function(t){console.log(t),e.setState({message:j.a.message.Error,loading:!1})}));case 2:return t.next=4,b.a.get(T.a.incidents+"?proximity=Berlin&proximity_square=100&per_page=10&page=1").then((function(e){return e.data})).then((function(t){console.log(t.incidents),t.incidents?e.setState({incidents:t.incidents,loading:!1}):e.setState({incidents:[],message:j.a.message.Empty,loading:!1})})).catch((function(t){console.log(t),e.setState({message:j.a.message.Error,loading:!1})}));case 4:case"end":return t.stop()}}),t)}))),e.fetchSearchResults=function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get(T.a.incidents+"?proximity=Berlin&proximity_square=100&per_page=10&page=".concat(a)).then((function(e){return e.data})).then((function(t){console.log(t.incidents),t.incidents.length?e.setState({incidents:t.incidents,loading:!1,currentPageNumber:a}):e.setState({incidents:[],message:j.a.message.Empty,loading:!1})})).catch((function(t){console.log(t),e.setState({message:j.a.message.Error,loading:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePageClick=function(t,a){a.preventDefault();var n="prev"===t?e.state.currentPageNumber-1:e.state.currentPageNumber+1;e.state.loading||e.setState({incidents:[],loading:!0,message:""},(function(){e.fetchSearchResults(n)}))},e.handleSearchInput=function(t){e.setState({searchInput:t.target.value})},e.handleStartDateChange=function(t){e.setState({startDate:t}),console.log(new Date(t/1e3).getTime())},e.handleEndDateChange=function(t){e.setState({endDate:t}),console.log(new Date(t/1e3).getTime())},e.handleSearchClick=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,c,s,l,i,o,m;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.setState({incidents:[],loading:!0,message:""}),n=e.state,r=n.searchInput,c=n.currentPageNumber,s=n.startDate,l=n.endDate,i=s?new Date(s/1e3).getTime():s,o=l?new Date(l/1e3).getTime():l,(m="&page=".concat(c)+(r?"&query=".concat(r):"")+(s?"&occurred_after=".concat(i):"")+(l?"&occurred_before=".concat(o):""))!=="&page=".concat(c)){t.next=9;break}return e.setState({message:j.a.message.FieldEmpty,loading:!1}),t.abrupt("return");case 9:return t.next=11,b.a.get(T.a.incidents+"?proximity=Berlin&proximity_square=100&per_page=10".concat(m)).then((function(e){return e.data})).then((function(t){console.log(t.incidents);var a=t.incidents.length,n=j.a.getPageCount(a,10);t.incidents.length?e.setState({incidents:t.incidents,loading:!1,message:"",totalResults:a,totalPages:n}):e.setState({incidents:[],message:j.a.message.Empty,loading:!1})})).catch((function(t){console.log(t),e.setState({message:j.a.message.Error,loading:!1})}));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.incidents,n=t.loading,c=t.message,s=t.currentPageNumber,l=t.totalPages,i=t.totalResults,o=t.startDate,m=t.endDate,d=s>1,u=l>s;return r.a.createElement("div",{className:"container"},r.a.createElement(P,{handleSearchClick:this.handleSearchClick,handleSearchInput:this.handleSearchInput,handleStartDateChange:this.handleStartDateChange,handleEndDateChange:this.handleEndDateChange,startDate:o,endDate:m}),!n&&!c&&i&&r.a.createElement("div",{className:"total-result text-right "},r.a.createElement("span",{className:"bg-dark text-white p-3 rounded h6"},"Total Cases in Berlin: ",i)),c&&r.a.createElement("p",{className:"message display-4"},c),r.a.createElement("img",{src:y.a,className:"search-loading ".concat(n?"show":"hide"),alt:"loader"}),r.a.createElement(D,{incidents:a}),!n&&!c&&r.a.createElement(w,{loading:n,showPrevLink:d,showNextLink:u,currentPageNumber:s,handlePrevClick:function(){return e.handlePageClick("prev",window.event)},handleNextClick:function(){return e.handlePageClick("next",window.event)}}))}}]),a}(n.Component),B=a(44),A=function(e){var t=e.match;Object(n.useEffect)((function(){N()}),[]);var a=Object(n.useState)({}),c=Object(B.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(!0),o=Object(B.a)(i,2),m=o[0],d=o[1],u=Object(n.useState)(),p=Object(B.a)(u,2),f=p[0],E=p[1],N=function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(T.a.incidents+"".concat(t.params.id)).then((function(e){return e.data})).then((function(e){if(e){console.log(e.incident);var t=e.incident;l(t)}else E(j.a.message.Empty)})).catch((function(e){console.log(e),E(j.a.message.Error)}));case 2:d(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},f&&r.a.createElement("p",{className:"message display-4"},f),r.a.createElement("img",{src:y.a,className:"search-loading ".concat(m?"show":"hide"),alt:"loader"}),!m&&r.a.createElement("div",{className:"animate__animated animate__fadeInLeft"},r.a.createElement("strong",{className:"h4 text-danger"},"STOLEN"),r.a.createElement("h3",{className:"bike-name display-4 text-secondary"},s.title.slice(7).split(/[()]/)[0]),r.a.createElement("h3",{className:"h6 text-white bg-dark p-2 rounded w-100"}," ",s.address||"Not Available"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("img",{src:s.media.image_url||s.media.image_url_thumb||k.a,alt:"Not Found",className:"w-100"})),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("p",null,r.a.createElement("strong",{className:"h5 text-secondary"},"Description: ")," ",s.description||"Not Available"),r.a.createElement("p",{className:"text-capitalize"},r.a.createElement("strong",{className:"h5 text-secondary"},"Primary Colors: ")," ",s.title.split(/[()]/)[1]||"NOT AVAILABLE"),r.a.createElement("p",null,r.a.createElement("strong",{className:"h5 text-secondary"},"Date Stolen: ")," ",new Date(1e3*s.occurred_at).toDateString()),r.a.createElement("p",null,r.a.createElement("strong",{className:"h5 text-secondary"},"Date Reported: ")," ",new Date(1e3*s.updated_at).toDateString())))))};var R=function(){return r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:I}),r.a.createElement(i.a,{path:"/bike/:id",component:A}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},24:function(e,t){e.exports={incidents:"https://bikewise.org/api/v2/incidents/",locations:"https://bikewise.org/api/v2/locations/"}},34:function(e,t,a){e.exports=a.p+"static/media/loader.f16c7534.gif"},35:function(e,t,a){e.exports=a.p+"static/media/bike.ecfb8dfe.png"},77:function(e,t,a){e.exports=a.p+"static/media/logo.73eafb76.png"},8:function(e,t){e.exports={getPageCount:function(e,t){var a=0===e%t?0:1;return Math.floor(e/t)+a},message:{Error:"Oops, Something went wrong!!",Empty:"No results found!!",FieldEmpty:"Oops, fields are empty!"}}},85:function(e,t,a){e.exports=a(173)},90:function(e,t,a){},94:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.8a196609.chunk.js.map